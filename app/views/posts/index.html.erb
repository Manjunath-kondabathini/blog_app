<h2 class="section-title">All Posts</h2>

<div class="search-container">
  <%= form_with url: posts_path, method: :get, local: true do |form| %>
    <div class="search-input-group">
      <%= form.text_field :search, value: params[:search], placeholder: "Search posts...", class: "search-field" %>
      <button class="search-button" type="submit">Search</button>
    </div>
  <% end %>
</div>

<% @posts.each do |post| %>
  <div class="post-card">
    <div class="post-content">
      <h4 class="post-title"><%= link_to post.title, post %></h4>
      <p class="post-snippet"><%= truncate(post.content, length: 150) %></p>
      <small class="post-meta">By <%= post.user.name %> â€¢ <%= time_ago_in_words(post.created_at) %> ago</small>

      <% if user_signed_in? && post.user == current_user %>
        <div class="post-actions">
          <%= link_to 'Edit', edit_post_path(post), class: "edit-button" %>
          <%= link_to 'Delete', post, data: { turbo_method: :delete, confirm: "Are you sure?" }, class: "delete-button" %>
        </div>
      <% end %>
    </div>
  </div>
<% end %>